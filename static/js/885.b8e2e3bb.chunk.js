"use strict";(self.webpackChunkvega_test=self.webpackChunkvega_test||[]).push([[885],{885:(e,s,t)=>{t.d(s,{worker:()=>f});var n=t(806),o=t(111),i=t(599),r=t(941);const c=e=>new Promise((s=>setTimeout(s,e))),a=e=>Number(e.toFixed(4)),u=(e,s)=>{var t;const n=null===(t=r.kf.find((s=>s.name===e)))||void 0===t?void 0:t.id;if(n&&r.a[e]){let t="";for(const n of Object.keys(r.a[e]))n<=s&&(!t||n>t)&&(t=n);if(t)return{id:n,asset:e,price:a(r.a[e][t])}}};function l(e,s){const t=[];for(const n of e){const e=u(n,s);e&&t.push(e)}return t}const d=[o.L.get("/portfolios",(async e=>{var s;let{request:t}=e;const n=null!==(s=new URL(t.url).searchParams.get("asOf"))&&void 0!==s?s:r.Ye,o=[];r.rB.positions.forEach((e=>{var s,t;const i=null===(s=r.kf.find((s=>s.name===e.assetName)))||void 0===s?void 0:s.id,c=null===(t=u(e.assetName,n))||void 0===t?void 0:t.price;i&&c&&o.push({id:e.id,asset:i,quantity:a(e.quantity),asOf:n,price:a(c*e.quantity)})}));const l={description:"successful operation",content:{id:r.rB.id,asOf:n,positions:o.sort(((e,s)=>e.price+s.price))}};return await c(250),i.c.json(l)})),o.L.get("/prices",(async e=>{var s,t;let{request:n}=e;const o=new URL(n.url).searchParams,a=o.get("asOf"),u=null===(s=o.get("assets"))||void 0===s?void 0:s.split(","),d=null!==a&&void 0!==a?a:r.Ye,f={description:"successful operation",content:l(null!==(t=null===u||void 0===u?void 0:u.filter((e=>r.ct.includes(e))))&&void 0!==t?t:r.ct,d)};return await c(250),i.c.json(f)})),o.L.get("/assets",(e=>{let{request:s}=e;const t={description:"successful operation",content:r.kf};return i.c.json(t)}))],f=(0,n.k)(...d)}}]);
//# sourceMappingURL=885.b8e2e3bb.chunk.js.map