"use strict";(self.webpackChunkvega_test=self.webpackChunkvega_test||[]).push([[885],{885:(s,t,e)=>{e.d(t,{worker:()=>f});var n=e(806),o=e(111),i=e(599),r=e(941);const c=s=>new Promise((t=>setTimeout(t,s))),a=s=>Number(s.toFixed(4)),u=(s,t)=>{var e;const n=null===(e=r.kf.find((t=>t.name===s)))||void 0===e?void 0:e.id;if(n&&r.a[s]){let e="";for(const n of Object.keys(r.a[s]))n<=t&&(!e||n>e)&&(e=n);if(e)return{id:n,asset:s,price:a(r.a[s][e])}}};function l(s,t){const e=[];for(const n of s){const s=u(n,t);s&&e.push(s)}return e}const d=[o.L.get("/portfolios",(async s=>{var t;let{request:e}=s;const n=null!==(t=new URL(e.url).searchParams.get("asOf"))&&void 0!==t?t:r.Ye,o=[];r.rB.positions.forEach((s=>{var t,e;const i=null===(t=r.kf.find((t=>t.name===s.assetName)))||void 0===t?void 0:t.id,c=null===(e=u(s.assetName,n))||void 0===e?void 0:e.price;i&&c&&o.push({id:s.id,asset:i,quantity:a(s.quantity),asOf:n,price:a(c*s.quantity)})}));const l={description:"successful operation",content:{id:r.rB.id,asOf:n,positions:o.sort(((s,t)=>s.price+t.price))}};return await c(250),i.c.json(l)})),o.L.get("/prices",(async s=>{var t,e;let{request:n}=s;const o=new URL(n.url).searchParams,a=o.get("asOf"),u=null===(t=o.get("assets"))||void 0===t?void 0:t.split(","),d=null!==a&&void 0!==a?a:r.Ye,f={description:"successful operation",content:l(null!==(e=null===u||void 0===u?void 0:u.filter((s=>r.ct.includes(s))))&&void 0!==e?e:r.ct,d)};return await c(250),i.c.json(f)})),o.L.get("/assets",(()=>{const s={description:"successful operation",content:r.kf};return i.c.json(s)}))],f=(0,n.k)(...d)}}]);
//# sourceMappingURL=885.f241d816.chunk.js.map